(this.webpackJsonpmovieapp=this.webpackJsonpmovieapp||[]).push([[0],{55:function(e,t,n){},56:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),i=n.n(c),s=(n(55),n(56),n(23)),o=n(9),l=n.n(o),u=n(20),d=n(8),f=(n(58),n(94)),j=n(93),v=(n(59),n(6)),m=n(2);function h(e){var t=e.movieName,n=e.originalName,r=e.moviePoster,c=e.releaseDate,i=e.rating,s=e.description,o=e.genres,j=e.id,h=Object(v.c)((function(e){return e.AddRemoveFavs})).filter((function(e){return e.id==j})),p=Object(a.useState)([]),g=Object(d.a)(p,2),b=g[0],O=g[1],_=Object(v.b)(),x=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://api.themoviedb.org/3/movie/".concat(j,"/similar?api_key=").concat("04b3d0c6123142a26162964fff18fab3","&language=en-US&page=1"),e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:a=(a=e.sent).results.splice(0,4),O(a);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useState)((function(){x()}),[]);var N=function(){0==h.length?(_({type:"ADD_TO_FAVS",payload:{movieName:t,moviePoster:r,originalName:n,releaseDate:c,rating:i,description:s,genres:o,id:j}}),function(){var e=JSON.parse(localStorage.getItem("favs"))||[];e.push({movieName:t,moviePoster:r,originalName:n,releaseDate:c,rating:i,description:s,genres:o,id:j}),localStorage.setItem("favs",JSON.stringify(e))}()):(_({type:"REMOVE_FROM_FAVS",payload:j}),function(){var e=JSON.parse(localStorage.getItem("favs"));e=e.filter((function(e){return e.id!=j})),localStorage.setItem("favs",JSON.stringify(e))}())};return Object(m.jsxs)("div",{className:"movie-card-full",children:[Object(m.jsxs)("div",{className:"movie-card-full__header",children:[Object(m.jsx)("h1",{className:"movie-card-full__header__english-name",children:t}),Object(m.jsx)("h3",{className:"movie-card-full__header__original-name",children:n})]}),Object(m.jsxs)("div",{className:"movie-card-full__info",children:[Object(m.jsxs)("div",{className:"movie-card-full__poster",children:[Object(m.jsx)("img",{src:r,className:"movie-card-full__poster__img"}),Object(m.jsx)("div",{className:"movie-card-full__add-to-favs",children:Object(m.jsxs)(f.a,{fullWidth:!0,className:"movie-card-full__add-to-favs__btn",variant:"contained",color:h.length>0?"secondary":"primary",onClick:function(){return N()},children:[h.length>0?"Remove from":"Add to"," favourites"]})})]}),Object(m.jsxs)("div",{className:"movie-card-full__description",children:[Object(m.jsxs)("p",{className:"movie-card-full__description__release-date",children:[Object(m.jsx)("strong",{children:"Release date: "}),c]}),Object(m.jsxs)("p",{className:"movie-card-full__description__rating",children:[Object(m.jsx)("strong",{children:"Rating: "}),i]}),Object(m.jsxs)("p",{className:"movie-card-full__description__genres",children:[Object(m.jsx)("strong",{children:"Genres: "}),o&&o.join(", ")]}),Object(m.jsx)("p",{className:"movie-card-full__description__description-text",children:s})]}),Object(m.jsxs)("div",{className:"movie-card-full__similar-movies",children:[Object(m.jsx)("h3",{className:"movie-card-full__similar-movies__header",children:"Similar movies"}),Object(m.jsx)("ul",{className:"movie-card-full__similar-movies__list",children:b.map((function(e){return Object(m.jsx)("li",{children:e.title})}))})]})]})]})}function p(e){var t=e.movieName,n=e.moviePoster,r=e.originalName,c=e.releaseDate,i=e.rating,s=e.description,o=e.genres,l=e.id,u=Object(a.useState)(!1),p=Object(d.a)(u,2),g=p[0],b=p[1],O=Object(v.b)(),_=Object(a.useState)(!1),x=Object(d.a)(_,2),N=(x[0],x[1]),S=Object(v.c)((function(e){return e.AddRemoveFavs})).filter((function(e){return e.id==l}));Object(a.useEffect)((function(){S.length>0&&N(!0)}),[]);var y=function(){if(JSON.parse(localStorage.getItem("favs")).length>0){var e=JSON.parse(localStorage.getItem("favs"));e=e.filter((function(e){return e.id!=l})),localStorage.setItem("favs",JSON.stringify(e))}},E=function(){var e=JSON.parse(localStorage.getItem("favs"))||[];e.push({movieName:t,moviePoster:n,originalName:r,releaseDate:c,rating:i,description:s,genres:o,id:l}),localStorage.setItem("favs",JSON.stringify(e))};return Object(m.jsxs)("div",{className:"movie-card-short",children:[Object(m.jsxs)("div",{className:"movie-card-short__desc",children:[Object(m.jsx)("h1",{className:"movie-card-short__header__name",children:t}),Object(m.jsx)("p",{className:"movie-card-short__header_genres",children:o?o.join(", "):Object(m.jsx)("br",{})}),Object(m.jsxs)(f.a,{fullWidth:!0,className:"movie-card-short__header__addtofavs",variant:"contained",color:S.length>0?"secondary":"primary",onClick:function(){0==S.length?(O({type:"ADD_TO_FAVS",payload:{movieName:t,moviePoster:n,originalName:r,releaseDate:c,rating:i,description:s,genres:o,id:l}}),E()):(O({type:"REMOVE_FROM_FAVS",payload:l}),y())},children:[S.length>0?"Remove from":"Add to"," Favourites"]}),Object(m.jsx)("div",{className:"movie-card-short__header_img-container",children:Object(m.jsx)("img",{src:n.includes("null")?"https://via.placeholder.com/500x750.jpg?text=No+Poster":n,className:"movie-card-short__desc__img"})}),Object(m.jsx)(f.a,{variant:"contained",color:"primary",onClick:function(){b(!g)},fullWidth:!0,children:"See more info"})]}),Object(m.jsx)(j.a,{open:g,onClose:function(){return b(!g)},children:Object(m.jsx)(h,{movieName:t,moviePoster:n.includes("null")?"https://via.placeholder.com/200x300.png?text=No+Poster":n,originalName:r,releaseDate:c,rating:i,description:s,genres:o,id:l})})]})}n(68);var g=n(92),b=n(48),O="04b3d0c6123142a26162964fff18fab3";function _(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(1),i=Object(d.a)(c,2),o=i[0],f=i[1],j=Object(a.useState)([]),h=Object(d.a)(j,2),_=(h[0],h[1],Object(v.c)((function(e){return e.UpdateSearch}))),x=Object(v.c)((function(e){return e.CurrMovie})),N=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(O,"&language=en-US"),e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,e.abrupt("return",a.genres);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){N()}),[]);Object(a.useEffect)((function(){f((function(e){return e+1})),S()}),[]),Object(a.useEffect)((function(){x.length>0&&r(Object.entries(_))}),[_]);var S=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://api.themoviedb.org/3/movie/popular?api_key=".concat(O,"&language=en-US&page=").concat(o),e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,e.next=9,N();case 9:c=e.sent,a.results&&(a.results&&a.results.length>0&&(a=a.results.map((function(e){var t=[];if(e.genre_ids.length>0){for(var n=0;n<c.length;n++)e.genre_ids.includes(c[n].id)&&t.push(c[n].name);e.genres=t}return e}))),r((function(e){return[].concat(Object(s.a)(e),Object(s.a)(Object.entries(a)))})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://api.themoviedb.org/3/search/movie?api_key=".concat(O,"&language=en-US&query=").concat(x,"&page=").concat(o+1,"&include_adult=false"),e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,e.next=9,N();case 9:c=e.sent,a.results&&(a.results&&a.results.length>0&&(a=a.results.map((function(e){var t=[];if(e.genre_ids.length>0){for(var n=0;n<c.length;n++)e.genre_ids.includes(c[n].id)&&t.push(c[n].name);e.genres=t}return e}))),r((function(e){return[].concat(Object(s.a)(e),Object(s.a)(Object.entries(a)))})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsx)(b.a,{dataLength:n.length,next:function(){return f((function(e){return e+1})),void(x?y():S())},hasMore:!0,children:Object(m.jsx)(g.a,{className:"movie-list",container:!0,direction:"row",justify:"center",children:n.length>0&&n.map((function(e){return Object(m.jsx)(p,{movieName:e[1]&&e[1].title,moviePoster:e[1]&&"http://image.tmdb.org/t/p/w500".concat(e[1].poster_path),originalName:e[1]&&e[1].original_title,releaseDate:e[1]&&e[1].release_date,rating:e[1]&&e[1].vote_average,description:e[1]&&e[1].overview,genres:e[1].genres,id:e[1]&&e[1].id})}))})})}n(69);var x="04b3d0c6123142a26162964fff18fab3";function N(){var e=Object(v.b)(),t=Object(a.useState)(""),n=Object(d.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)([]),s=Object(d.a)(i,2),o=(s[0],s[1],Object(a.useState)([])),f=Object(d.a)(o,2),j=f[0],h=f[1],p=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://api.themoviedb.org/3/genre/movie/list?api_key=".concat(x,"&language=en-US"),e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,h(a.genres);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){p()}),[]),Object(a.useEffect)((function(){g(),e({type:"CURR_MOVIE",payload:r})}),[r]);var g=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://api.themoviedb.org/3/search/movie?api_key=".concat(x,"&language=en-US&query=").concat(r,"&page=1&include_adult=false"),e.next=3,fetch(t);case 3:return n=e.sent,e.next=6,n.json();case 6:(a=e.sent).results&&a.results.length>0&&(a=a.results.map((function(e){var t=[];if(e.genre_ids.length>0){for(var n=0;n<j.length;n++)e.genre_ids.includes(j[n].id)&&t.push(j[n].name);e.genres=t}return e})),b(a));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(t){e({type:"UPDATE_SEARCH",payload:t})};return Object(m.jsx)("div",{className:"search-bar",children:Object(m.jsx)("input",{type:"text",onChange:function(e){return c(e.target.value)},className:"search-bar__input"})})}n(70);var S=n(32);function y(){return Object(m.jsxs)("div",{className:"header",children:[Object(m.jsx)("div",{className:"header_elem",children:Object(m.jsx)(S.b,{to:"/",children:Object(m.jsx)(f.a,{children:"Main"})})}),Object(m.jsx)("div",{className:"header_elem",children:Object(m.jsx)(S.b,{to:"/favs",children:Object(m.jsx)(f.a,{children:"Favourites"})})})]})}var E=n(38);n(73);function w(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=(t[0],t[1]),r=Object(v.c)((function(e){return e.AddRemoveFavs}));return Object(a.useEffect)((function(){n(r),console.log(r)}),[]),Object(m.jsx)("div",{className:"favourites",children:Object(m.jsx)(g.a,{className:"movie-list",container:!0,direction:"row",justify:"center",children:r.length>0&&r.map((function(e){return Object(m.jsx)(p,Object(E.a)({movieName:e.movieName,id:e.id,moviePoster:e.moviePoster,originalName:e.originalName,releaseDate:e.releaseDate,rating:e.rating,description:e.description,genres:e.genres},"id",e.id))}))})})}var D=n(5);var R=function(){var e=Object(v.b)(),t=null!==localStorage.getItem("favs")?JSON.parse(localStorage.getItem("favs")):[];return Object(a.useEffect)((function(){t.length>0&&t.map((function(t){e({type:"ADD_TO_FAVS",payload:t})}))}),[]),Object(m.jsx)("div",{className:"app",children:Object(m.jsxs)(S.a,{children:[Object(m.jsx)(y,{}),Object(m.jsxs)(D.c,{children:[Object(m.jsxs)(D.a,{exact:!0,path:"/",children:[Object(m.jsx)(N,{}),Object(m.jsx)(_,{})]}),Object(m.jsx)(D.a,{path:"/favs",children:Object(m.jsx)(w,{})})]})]})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,96)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},F=n(39),k=n(44);var I=Object(F.a)({UpdateSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SEARCH":return Object(k.a)(Object(k.a)({},e),t.payload);default:return e}},AddRemoveFavs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_FAVS":return[].concat(Object(s.a)(e),[t.payload]);case"REMOVE_FROM_FAVS":return e.filter((function(e){return e.id!=t.payload}));default:return e}},CurrMovie:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CURR_MOVIE":return t.payload;default:return e}}}),P=Object(F.b)(I,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());console.log(P),i.a.render(Object(m.jsx)(v.a,{store:P,children:Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(R,{})})}),document.getElementById("root")),A()}},[[74,1,2]]]);
//# sourceMappingURL=main.a3e6feaf.chunk.js.map